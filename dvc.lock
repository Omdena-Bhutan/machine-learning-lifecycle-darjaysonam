schema: '2.0'
stages:
  get_data:
    cmd: python src/data_loader.py
    deps:
    - path: params.yaml
      hash: md5
      md5: eb528c0ef0911d21ef4ef7f8096c7259
      size: 275
    - path: src/data_loader.py
      hash: md5
      md5: af831c4025f6e4375c4f8a23ceafed16
      size: 839
    params:
      params.yaml:
        data.dataset_name: imdb
        data.raw_dir: data/raw
        data.test_file: imdb_test.parquet
        data.train_file: imdb_train.parquet
    outs:
    - path: data/raw/imdb_test.parquet
      hash: md5
      md5: e5f5d42a41ba56d12151d51f42b08e9f
      size: 20048381
    - path: data/raw/imdb_train.parquet
      hash: md5
      md5: 79145b777933fc1c86f9914b5f149ebe
      size: 20559253
  train:
    cmd: python src/model.py
    deps:
    - path: data/raw/imdb_test.parquet
      hash: md5
      md5: e5f5d42a41ba56d12151d51f42b08e9f
      size: 20048381
    - path: data/raw/imdb_train.parquet
      hash: md5
      md5: 79145b777933fc1c86f9914b5f149ebe
      size: 20559253
    - path: params.yaml
      hash: md5
      md5: eb528c0ef0911d21ef4ef7f8096c7259
      size: 275
    - path: src/model.py
      hash: md5
      md5: 259e6567793c2b855d7632b8d5101237
      size: 2802
    params:
      params.yaml:
        train.logreg_C: 1.0
        train.logreg_max_iter: 200
        train.tfidf_max_features: 50000
        train.tfidf_ngram_range:
        - 1
        - 2
    outs:
    - path: models/trained/baseline_tfidf_logreg
      hash: md5
      md5: 914e42edb7ac9c20b24456ed5899ffd8.dir
      size: 2381327
      nfiles: 5
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/raw/imdb_test.parquet
      hash: md5
      md5: e5f5d42a41ba56d12151d51f42b08e9f
      size: 20048381
    - path: models/trained/baseline_tfidf_logreg
      hash: md5
      md5: 914e42edb7ac9c20b24456ed5899ffd8.dir
      size: 2381327
      nfiles: 5
    - path: params.yaml
      hash: md5
      md5: eb528c0ef0911d21ef4ef7f8096c7259
      size: 275
    - path: src/evaluate.py
      hash: md5
      md5: f7177296171bcedec48ebf7a0c16b2ce
      size: 2346
    outs:
    - path: reports/confusion_matrix.png
      hash: md5
      md5: 18a971ee1f78f31938e71adc57dae3dd
      size: 15008
    - path: reports/roc_curve.png
      hash: md5
      md5: 7b73649787379fd6f2ca4b53a41851b9
      size: 21830
  predict_demo:
    cmd: python src/inference.py batch --input data/processed/sample_texts.csv 
      --output data/processed/predictions.csv
    deps:
    - path: data/processed/sample_texts.csv
      hash: md5
      md5: 3f670548ed2f35d9db160a4651372065
      size: 76
    - path: models/trained/baseline_tfidf_logreg
      hash: md5
      md5: 914e42edb7ac9c20b24456ed5899ffd8.dir
      size: 2381327
      nfiles: 5
    - path: src/inference.py
      hash: md5
      md5: 1f9641b8a6eb6f51394f130bd52f6496
      size: 2181
    outs:
    - path: data/processed/predictions.csv
      hash: md5
      md5: ded049633c4befbe82c665ad91a6b091
      size: 187
